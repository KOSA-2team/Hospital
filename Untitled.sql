CREATE TABLE `medical_staff` (
    `medical_num` INT NOT NULL AUTO_INCREMENT,
    `medical_id` VARCHAR(30) NOT NULL,
    `pwd` VARCHAR(255) NOT NULL,
    `mname` VARCHAR(20) NOT NULL,
    `specialty` VARCHAR(20) NOT NULL,
    `mphone` VARCHAR(15) NOT NULL,
    `email` VARCHAR(40) NOT NULL,
    `power` TINYINT NOT NULL DEFAULT 1 COMMENT '1:normal, 2:admin, 3:sys',
    PRIMARY KEY (`medical_num`),
    UNIQUE (`medical_id`),
    UNIQUE (`email`)
);

CREATE TABLE `patient` (
    `patient_num` INT NOT NULL AUTO_INCREMENT,
    `name` VARCHAR(20) NOT NULL,
    `phone` VARCHAR(15) NOT NULL,
    `birth_date` DATE NOT NULL,
    `gender` TINYINT NOT NULL DEFAULT 0 COMMENT '0:unknown, 1:male, 2:female',
    `created_at` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    PRIMARY KEY (`patient_num`),
    UNIQUE (`phone`)
);

CREATE TABLE `Reservation` (
    `reservation_num` INT NOT NULL AUTO_INCREMENT,
    `patient_num` INT NOT NULL,
    `medical_num` INT NOT NULL,
    `reservation` DATETIME NOT NULL,
    `status` TINYINT NOT NULL COMMENT '0:req, 1:confirmed, 2:canceled, 3:done',
    PRIMARY KEY (`reservation_num`),
    KEY `IDX_Reservation_Patient` (`patient_num`),
    KEY `IDX_Reservation_Medical` (`medical_num`),
    CONSTRAINT `FK_Reservation_Patient` FOREIGN KEY (`patient_num`) REFERENCES `patient`(`patient_num`),
    CONSTRAINT `FK_Reservation_MedicalStaff` FOREIGN KEY (`medical_num`) REFERENCES `medical_staff`(`medical_num`)
);

CREATE TABLE `Treatment` (
    `treatment_num` INT NOT NULL AUTO_INCREMENT,
    `reservation_num` INT NOT NULL,
    `diagnosis` VARCHAR(300) NOT NULL,
    `treatment` VARCHAR(300) NOT NULL,
    `treatment_date` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    PRIMARY KEY (`treatment_num`),
    CONSTRAINT `FK_Treatment_Reservation` FOREIGN KEY (`reservation_num`) REFERENCES `Reservation`(`reservation_num`)
);

CREATE TABLE `prescription` (
    `prescription_num` INT NOT NULL AUTO_INCREMENT,
    `treatment_num` INT NOT NULL,
    `medication_name` VARCHAR(300) NOT NULL,
    `dosage` VARCHAR(300) NOT NULL,
    `duration_days` INT NOT NULL DEFAULT 1,
    PRIMARY KEY (`prescription_num`),
    CONSTRAINT `FK_Prescription_Treatment` FOREIGN KEY (`treatment_num`) REFERENCES `Treatment`(`treatment_num`)
);


---------------------------- 더미 데이터

-- 기존 데이터가 있다면 초기화 (선택사항, 필요시 주석 해제 후 실행)
/*
SET FOREIGN_KEY_CHECKS = 0;
TRUNCATE TABLE prescription;
TRUNCATE TABLE Treatment;
TRUNCATE TABLE Reservation;
TRUNCATE TABLE patient;
TRUNCATE TABLE medical_staff;
SET FOREIGN_KEY_CHECKS = 1;
*/

-- 1. 의료진 (Medical Staff) 30명 생성
INSERT INTO `medical_staff` (`medical_id`, `pwd`, `mname`, `specialty`, `mphone`, `email`, `power`) VALUES
('doc_01', 'pw1234', '김철수', '내과', '010-1000-0001', 'doc1@hos.com', 1),
('doc_02', 'pw1234', '이영희', '내과', '010-1000-0002', 'doc2@hos.com', 1),
('doc_03', 'pw1234', '박민수', '외과', '010-1000-0003', 'doc3@hos.com', 1),
('doc_04', 'pw1234', '정수진', '외과', '010-1000-0004', 'doc4@hos.com', 1),
('doc_05', 'pw1234', '최동훈', '소아과', '010-1000-0005', 'doc5@hos.com', 1),
('doc_06', 'pw1234', '강지영', '소아과', '010-1000-0006', 'doc6@hos.com', 1),
('doc_07', 'pw1234', '조현우', '피부과', '010-1000-0007', 'doc7@hos.com', 1),
('doc_08', 'pw1234', '윤서연', '피부과', '010-1000-0008', 'doc8@hos.com', 1),
('doc_09', 'pw1234', '장기태', '이비인후과', '010-1000-0009', 'doc9@hos.com', 1),
('doc_10', 'pw1234', '임나연', '이비인후과', '010-1000-0010', 'doc10@hos.com', 1),
('doc_11', 'pw1234', '한승우', '정형외과', '010-1000-0011', 'doc11@hos.com', 1),
('doc_12', 'pw1234', '오지호', '정형외과', '010-1000-0012', 'doc12@hos.com', 1),
('doc_13', 'pw1234', '서예진', '안과', '010-1000-0013', 'doc13@hos.com', 1),
('doc_14', 'pw1234', '신동엽', '안과', '010-1000-0014', 'doc14@hos.com', 1),
('doc_15', 'pw1234', '권상우', '산부인과', '010-1000-0015', 'doc15@hos.com', 1),
('doc_16', 'pw1234', '황정민', '비뇨기과', '010-1000-0016', 'doc16@hos.com', 1),
('doc_17', 'pw1234', '안성기', '신경과', '010-1000-0017', 'doc17@hos.com', 1),
('doc_18', 'pw1234', '송강호', '신경외과', '010-1000-0018', 'doc18@hos.com', 1),
('doc_19', 'pw1234', '전도연', '가정의학과', '010-1000-0019', 'doc19@hos.com', 1),
('doc_20', 'pw1234', '김혜수', '가정의학과', '010-1000-0020', 'doc20@hos.com', 1),
('doc_21', 'pw1234', '유재석', '응급의학과', '010-1000-0021', 'doc21@hos.com', 1),
('doc_22', 'pw1234', '강호동', '응급의학과', '010-1000-0022', 'doc22@hos.com', 1),
('doc_23', 'pw1234', '이효리', '치과', '010-1000-0023', 'doc23@hos.com', 1),
('doc_24', 'pw1234', '박명수', '치과', '010-1000-0024', 'doc24@hos.com', 1),
('doc_25', 'pw1234', '정준하', '마취통증과', '010-1000-0025', 'doc25@hos.com', 1),
('admin_01', 'ad1234', '김관리', '원무과', '010-9000-0001', 'adm1@hos.com', 2),
('admin_02', 'ad1234', '이행정', '원무과', '010-9000-0002', 'adm2@hos.com', 2),
('admin_03', 'ad1234', '박총무', '총무과', '010-9000-0003', 'adm3@hos.com', 2),
('sys_01', 'sys1234', '최시스템', '전산실', '010-9999-0001', 'sys1@hos.com', 3),
('sys_02', 'sys1234', '정서버', '전산실', '010-9999-0002', 'sys2@hos.com', 3);

-- 2. 환자 (Patient) 30명 생성
INSERT INTO `patient` (`name`, `phone`, `birth_date`, `gender`) VALUES
('유환자', '010-2000-0001', '1980-01-01', 1),
('김아픔', '010-2000-0002', '1990-02-15', 2),
('이진료', '010-2000-0003', '1975-05-20', 1),
('박건강', '010-2000-0004', '1988-11-11', 1),
('최쾌유', '010-2000-0005', '2000-12-25', 2),
('정회복', '010-2000-0006', '1965-06-30', 2),
('강튼튼', '010-2000-0007', '2010-03-05', 1),
('조씩씩', '010-2000-0008', '2015-08-15', 2),
('윤쑥쑥', '010-2000-0009', '2020-01-10', 1),
('장무병', '010-2000-0010', '1950-09-09', 1),
('임장수', '010-2000-0011', '1945-04-05', 2),
('한사랑', '010-2000-0012', '1995-07-07', 2),
('오기쁨', '010-2000-0013', '1998-10-02', 2),
('서희망', '010-2000-0014', '1982-12-12', 1),
('신믿음', '010-2000-0015', '1979-02-28', 1),
('권소망', '010-2000-0016', '2005-05-05', 2),
('황행복', '010-2000-0017', '1960-01-20', 1),
('안평화', '010-2000-0018', '1972-08-30', 2),
('송성실', '010-2000-0019', '1985-11-22', 1),
('전정직', '010-2000-0020', '1992-06-15', 2),
('김지혜', '010-2000-0021', '1999-03-01', 2),
('이현수', '010-2000-0022', '1987-09-18', 1),
('박준호', '010-2000-0023', '2002-04-14', 1),
('최수진', '010-2000-0024', '1994-07-29', 2),
('정우성', '010-2000-0025', '1970-12-05', 1),
('강동원', '010-2000-0026', '1981-01-18', 1),
('조인성', '010-2000-0027', '1983-05-13', 1),
('한효주', '010-2000-0028', '1987-02-22', 2),
('김태희', '010-2000-0029', '1980-03-29', 2),
('송중기', '010-2000-0030', '1985-09-19', 1);

-- 3. 예약 (Reservation) 50개 생성
-- 상태(status): 0(req), 1(confirmed), 2(canceled), 3(done)
-- 전략: 앞쪽 35개(ID 1~35)는 '3:done'으로 설정하여 Treatment 테이블과 연결
-- 나머지는 0, 1, 2 상태 혼합
INSERT INTO `Reservation` (`patient_num`, `medical_num`, `reservation`, `status`) VALUES
-- [진료완료: status 3] - 35건
(1, 1, '2023-10-01 09:00:00', 3),
(2, 2, '2023-10-01 09:30:00', 3),
(3, 3, '2023-10-01 10:00:00', 3),
(4, 4, '2023-10-01 10:30:00', 3),
(5, 5, '2023-10-01 11:00:00', 3),
(6, 6, '2023-10-01 11:30:00', 3),
(7, 7, '2023-10-01 13:00:00', 3),
(8, 8, '2023-10-01 13:30:00', 3),
(9, 9, '2023-10-01 14:00:00', 3),
(10, 10, '2023-10-01 14:30:00', 3),
(11, 11, '2023-10-01 15:00:00', 3),
(12, 12, '2023-10-01 15:30:00', 3),
(13, 13, '2023-10-01 16:00:00', 3),
(14, 14, '2023-10-01 16:30:00', 3),
(15, 15, '2023-10-01 17:00:00', 3),
(16, 16, '2023-10-02 09:00:00', 3),
(17, 17, '2023-10-02 09:30:00', 3),
(18, 18, '2023-10-02 10:00:00', 3),
(19, 19, '2023-10-02 10:30:00', 3),
(20, 20, '2023-10-02 11:00:00', 3),
(21, 21, '2023-10-02 11:30:00', 3),
(22, 22, '2023-10-02 13:00:00', 3),
(23, 23, '2023-10-02 13:30:00', 3),
(24, 24, '2023-10-02 14:00:00', 3),
(25, 25, '2023-10-02 14:30:00', 3),
(26, 1, '2023-10-02 15:00:00', 3),
(27, 2, '2023-10-02 15:30:00', 3),
(28, 3, '2023-10-02 16:00:00', 3),
(29, 4, '2023-10-02 16:30:00', 3),
(30, 5, '2023-10-02 17:00:00', 3),
(1, 6, '2023-10-03 09:00:00', 3),
(2, 7, '2023-10-03 09:30:00', 3),
(3, 8, '2023-10-03 10:00:00', 3),
(4, 9, '2023-10-03 10:30:00', 3),
(5, 10, '2023-10-03 11:00:00', 3),
-- [예약확정: status 1]
(6, 11, '2023-11-01 09:00:00', 1),
(7, 12, '2023-11-01 10:00:00', 1),
(8, 13, '2023-11-01 11:00:00', 1),
(9, 14, '2023-11-01 14:00:00', 1),
(10, 15, '2023-11-01 15:00:00', 1),
-- [예약요청: status 0]
(11, 16, '2023-11-05 09:00:00', 0),
(12, 17, '2023-11-05 10:00:00', 0),
(13, 18, '2023-11-05 11:00:00', 0),
(14, 19, '2023-11-05 14:00:00', 0),
(15, 20, '2023-11-05 15:00:00', 0),
-- [예약취소: status 2]
(16, 21, '2023-10-15 09:00:00', 2),
(17, 22, '2023-10-15 10:00:00', 2),
(18, 23, '2023-10-15 11:00:00', 2),
(19, 24, '2023-10-15 14:00:00', 2),
(20, 25, '2023-10-15 15:00:00', 2);

-- 4. 진료 (Treatment) 35개 생성
-- Reservation 1~35번(status=3)에 대한 진료 기록
INSERT INTO `Treatment` (`reservation_num`, `diagnosis`, `treatment`, `treatment_date`) VALUES
(1, '급성 위염', '위장약 처방 및 식단 조절 권고', '2023-10-01 09:15:00'),
(2, '고혈압', '혈압 강하제 처방', '2023-10-01 09:45:00'),
(3, '맹장염 의심', '상급 병원 이송 및 수술 권유', '2023-10-01 10:15:00'),
(4, '타박상', '물리치료 및 파스 처방', '2023-10-01 10:45:00'),
(5, '감기', '해열제 및 기침약 처방', '2023-10-01 11:15:00'),
(6, '독감', '타미플루 처방 및 격리 권고', '2023-10-01 11:45:00'),
(7, '아토피 피부염', '보습제 및 스테로이드 연고 처방', '2023-10-01 13:15:00'),
(8, '여드름', '피지 조절제 처방', '2023-10-01 13:45:00'),
(9, '중이염', '항생제 처방', '2023-10-01 14:15:00'),
(10, '알레르기 비염', '항히스타민제 처방', '2023-10-01 14:45:00'),
(11, '허리 디스크', '도수 치료 및 진통제 처방', '2023-10-01 15:15:00'),
(12, '발목 염좌', '깁스 및 물리치료', '2023-10-01 15:45:00'),
(13, '결막염', '안약 처방', '2023-10-01 16:15:00'),
(14, '안구 건조증', '인공눈물 처방', '2023-10-01 16:45:00'),
(15, '임신 확인', '초음파 검사 및 엽산 처방', '2023-10-01 17:15:00'),
(16, '방광염', '항생제 처방', '2023-10-02 09:15:00'),
(17, '두통', '진통제 처방 및 MRI 권유', '2023-10-02 09:45:00'),
(18, '뇌진탕', 'CT 촬영 및 입원 관찰', '2023-10-02 10:15:00'),
(19, '만성 피로', '비타민 주사 및 휴식 권고', '2023-10-02 10:45:00'),
(20, '비만', '식욕 억제제 처방 및 운동 처방', '2023-10-02 11:15:00'),
(21, '식중독', '수액 처방 및 금식', '2023-10-02 11:45:00'),
(22, '화상', '드레싱 및 연고 처방', '2023-10-02 13:15:00'),
(23, '충치', '레진 치료', '2023-10-02 13:45:00'),
(24, '사랑니 통증', '발치 예약 및 진통제 처방', '2023-10-02 14:15:00'),
(25, '대상포진', '항바이러스제 처방', '2023-10-02 14:45:00'),
(26, '역류성 식도염', '제산제 처방', '2023-10-02 15:15:00'),
(27, '당뇨', '인슐린 처방 및 식이요법 교육', '2023-10-02 15:45:00'),
(28, '손가락 골절', '핀 고정 수술', '2023-10-02 16:15:00'),
(29, '하지정맥류', '압박 스타킹 처방', '2023-10-02 16:45:00'),
(30, '장염', '지사제 및 유산균 처방', '2023-10-02 17:15:00'),
(31, '편도선염', '항생제 및 해열제', '2023-10-03 09:15:00'),
(32, '무좀', '항진균제 연고', '2023-10-03 09:45:00'),
(33, '습진', '스테로이드 로션', '2023-10-03 10:15:00'),
(34, '축농증', '코 세척 및 항생제', '2023-10-03 10:45:00'),
(35, '이명', '혈액순환 개선제', '2023-10-03 11:15:00');

-- 5. 처방전 (Prescription) 40개 생성
-- Treatment 1~35번에 매핑 (일부는 약 2개 이상)
INSERT INTO `prescription` (`treatment_num`, `medication_name`, `dosage`, `duration_days`) VALUES
(1, '위장보호제', '식후 30분 1포', 3),
(2, '암로디핀', '아침 식전 1정', 30),
(4, '진통소염제', '식후 30분 1정', 5),
(5, '타이레놀', '필요시 1정', 3),
(5, '코푸시럽', '식후 30분 1포', 3),
(6, '타미플루', '12시간 간격 1캡슐', 5),
(7, '보습로션', '수시로 도포', 14),
(7, '리도맥스', '하루 2회 환부', 5),
(8, '이소티논', '식후 1정', 14),
(9, '오그멘틴', '식후 30분 1정', 7),
(10, '지르텍', '취침 전 1정', 7),
(11, '근육이완제', '식후 30분 1정', 5),
(11, '진통제', '식후 30분 1정', 5),
(12, '진통소염제', '식후 30분 1정', 7),
(13, '오플록사신 점안액', '하루 4회 1방울', 7),
(14, '히알루론산 점안액', '수시로 점안', 30),
(15, '엽산제', '하루 1정', 30),
(16, '사이프로플록사신', '식후 30분 1정', 3),
(17, '게보린', '필요시 1정', 3),
(19, '종합비타민', '하루 1정', 30),
(20, '삭센다', '매일 오전 주사', 30),
(21, '수액', '원내 투여', 1),
(22, '실버설파다이아진', '하루 1회 도포', 7),
(23, '진통제', '통증 심할 시', 2),
(24, '진통소염제', '식후 30분 1정', 3),
(25, '아시클로버', '하루 5회 1정', 7),
(26, '알마겔', '식간 1포', 5),
(27, '메트포르민', '식사와 함께 1정', 30),
(28, '항생제', '식후 30분 1정', 7),
(28, '진통제', '식후 30분 1정', 7),
(30, '스멕타', '식간 1포', 3),
(31, '항생제', '식후 30분 1정', 5),
(31, '해열제', '필요시 1정', 5),
(32, '라미실', '하루 1회 도포', 14),
(33, '더모베이트', '하루 2회 얇게', 5),
(34, '항생제', '식후 30분 1정', 10),
(34, '비강스프레이', '하루 2회 분무', 10),
(35, '기넥신', '식후 1정', 30),
(1, '소화제', '식후 30분 1정', 3), -- 1번 진료 추가 처방
(2, '아스피린', '식후 1정', 30); -- 2번 진료 추가 처방
