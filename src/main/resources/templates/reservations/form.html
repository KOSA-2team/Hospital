<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <title>예약 등록</title>
    <link rel="stylesheet" th:href="@{/css/global.css}" />
</head>

<body>

    <div th:replace="layout/header :: headerFragment"></div>

    <main class="main-layout layout-center p-0">
        <div class="card" style="width: 100%; max-width: 600px; padding: 40px;">
            <div style="text-align: center; margin-bottom: 30px;">
                <h1 class="text-primary" style="margin-bottom: 10px; font-size: 1.8em;">진료 예약 등록</h1>
                <p class="text-muted">환자의 진료를 예약합니다.</p>
            </div>

            <div th:if="${param.error}" class="card"
                style="background-color: #fff5f5; border-color: #feb2b2; margin-bottom: 20px; padding: 15px;">
                <div style="color: #c53030; font-weight: 600;">
                    이 미 해당 시간에 예약이 존재합니다! 다른 시간을 선택해주세요.
                </div>
            </div>

            <form action="/reservations/new" method="post" class="flex flex-col gap-4">

                <div>
                    <label for="patientNum" class="text-muted"
                        style="font-weight: 600; display: block; margin-bottom: 6px;">환자 선택</label>
                    <select id="patientNum" name="patientNum" required class="form-input">
                        <option value="">-- 환자를 선택하세요 --</option>
                        <option th:each="p : ${patients}" th:value="${p.patient_num}"
                            th:text="|${p.name} (${p.phone})|">홍길동 (010-1234-5678)</option>
                    </select>
                </div>

                <div>
                    <label for="medicalNum" class="text-muted"
                        style="font-weight: 600; display: block; margin-bottom: 6px;">담당 의사 선택</label>
                    <select id="medicalNum" name="medicalNum" required class="form-input">
                        <option value="">-- 의사를 선택하세요 --</option>
                        <option th:each="d : ${doctors}" th:value="${d.medicalNum}"
                            th:text="|${d.mname} (${d.specialty})|">김닥터 (내과)</option>
                    </select>
                </div>

                <div>
                    <label for="reservationDate" class="text-muted"
                        style="font-weight: 600; display: block; margin-bottom: 6px;">예약 일시</label>
                    <input type="datetime-local" id="reservationDate" name="reservationDate" required
                        class="form-input">
                </div>

                <button type="submit" class="btn btn-primary" style="margin-top: 20px;">예약 등록하기</button>
            </form>

            <a href="/reservations" class="btn btn-outline"
                style="margin-top: 15px; width: 100%; text-align: center;">목록으로 돌아가기</a>
        </div>
    </main>

    <div th:replace="layout/footer :: footerFragment"></div>

</body>

</html>