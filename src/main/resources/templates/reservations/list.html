<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>ì˜ˆì•½ ëª©ë¡</title>
    <style>
        body { font-family: sans-serif; padding: 20px; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th, td { border: 1px solid #ddd; padding: 10px; text-align: center; }
        th { background-color: #f4f4f4; }
        .btn-cancel { background-color: #dc3545; color: white; border: none; padding: 5px 10px; cursor: pointer; }
        .btn-new { display: inline-block; padding: 10px 20px; background-color: #28a745; color: white; text-decoration: none; border-radius: 5px;}
    </style>
</head>
<body>

<h2>ğŸ“‹ ì˜ˆì•½ í˜„í™©íŒ</h2>

<a href="/reservations/new" class="btn-new"> ìƒˆ ì˜ˆì•½ ë“±ë¡</a>

<table>
    <thead>
    <tr>
        <th>ë²ˆí˜¸</th>
        <th>ì˜ˆì•½ ì¼ì‹œ</th>
        <th>í™˜ìëª…</th>
        <th>ë‹´ë‹¹ ì˜ì‚¬</th>
        <th>ìƒíƒœ</th>
        <th>ê´€ë¦¬</th>
    </tr>
    </thead>
    <tbody>
    <tr th:if="${#lists.isEmpty(reservations)}">
        <td colspan="6">ë“±ë¡ëœ ì˜ˆì•½ì´ ì—†ìŠµë‹ˆë‹¤.</td>
    </tr>

    <tr th:each="appt : ${reservations}">
        <td th:text="${appt.reservationNum}">1</td>
        <td th:text="${#temporals.format(appt.reservationDate, 'yyyy-MM-dd HH:mm')}">2023-12-05 14:00</td>
        <td th:text="${appt.patientName}">í™ê¸¸ë™</td>
        <td th:text="${appt.doctorName}">ê¹€ë‹¥í„°</td>
        <td th:text="${appt.statusDescription}" style="font-weight: bold;">ì˜ˆì•½ ë¨</td>
        <td>
            <form th:if="${appt.status == 0}"
                  th:action="@{/reservations/{id}/cancel(id=${appt.reservationNum})}"
                  method="post" onsubmit="return confirm('ì •ë§ ì·¨ì†Œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?');">
                <button type="submit" class="btn-cancel">ì·¨ì†Œ</button>
            </form>

            <span th:if="${appt.status == 2}" style="color: gray;">(ì·¨ì†Œë¨)</span>
        </td>
    </tr>
    </tbody>
</table>

</body>
</html>