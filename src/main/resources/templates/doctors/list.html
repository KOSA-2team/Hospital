<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>ì§ì› ëª©ë¡</title>
    <style>
        /* ì „ì²´ì ì¸ í°íŠ¸ì™€ ë°°ê²½ ì„¤ì • */
        body {
            font-family: 'Arial', 'Malgun Gothic', sans-serif;
            background-color: #f4f7f9;
            margin: 20px;
            padding: 0;
        }

        /* í…Œì´ë¸” ì»¨í…Œì´ë„ˆ ìŠ¤íƒ€ì¼ */
        table {
            /* ğŸš¨ ìˆ˜ì •: í™”ë©´ ë„ˆë¹„ì˜ 90%ë¥¼ ì°¨ì§€í•˜ë„ë¡ ì„¤ì • */
            width: 90%;
            border-collapse: collapse;
            margin: 25px auto; /* ì¤‘ì•™ ì •ë ¬ ìœ ì§€ */
            font-size: 0.9em;
            min-width: 800px; /* ìµœì†Œ ë„ˆë¹„ ìœ ì§€ */
            max-width: 1200px; /* ìµœëŒ€ ë„ˆë¹„ ì œí•œ */
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
            background-color: #ffffff;
            border-radius: 8px;
            overflow: hidden;
        }

        /* í…Œì´ë¸” í—¤ë” ìŠ¤íƒ€ì¼ (ì»¬ëŸ¬, í°íŠ¸ êµµê¸°) */
        th {
            background-color: #007bff;
            color: #ffffff;
            text-align: center;
            padding: 12px 15px;
            font-weight: 600;
            letter-spacing: 0.5px;
            border: none;
        }

        /* í…Œì´ë¸” ì…€ ìŠ¤íƒ€ì¼ */
        td {
            padding: 10px 15px;
            border-bottom: 1px solid #dddddd;
            color: #333333;
            line-height: 1.4;
            text-align: center;
        }

        /* ì˜ˆì™¸: ë§ˆì§€ë§‰ ê´€ë¦¬ ì…€ì€ ì™¼ìª½ ì •ë ¬ ìœ ì§€ (ë²„íŠ¼ì´ ëª¨ì—¬ ë³´ì´ë„ë¡) */
        td:last-child {
            text-align: center;
            white-space: nowrap;
        }


        /* ë§ˆìš°ìŠ¤ ì˜¤ë²„ ì‹œ ìŠ¤íƒ€ì¼ (ê°€ë…ì„± í–¥ìƒ) */
        tr:hover {
            background-color: #f1f8ff;
            transition: background-color 0.2s ease;
        }

        /* ë§ˆì§€ë§‰ í–‰ì˜ í•˜ë‹¨ í…Œë‘ë¦¬ ì œê±° */
        tr:last-of-type td {
            border-bottom: none;
        }

        /* ë§í¬ ë° ë²„íŠ¼ ê³µí†µ ìŠ¤íƒ€ì¼ */
        a, button {
            text-decoration: none;
            padding: 5px 10px;
            border-radius: 4px;
            margin-right: 5px;
            cursor: pointer;
            font-size: 0.85em;
            font-weight: 500;
            display: inline-block;
            border: 1px solid transparent;
            vertical-align: middle;
        }

        /* ìˆ˜ì • ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
        .btn-edit {
            background-color: #28a745;
            color: white;
        }
        .btn-edit:hover {
            background-color: #218838;
        }

        /* ê¶Œí•œ ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
        .btn-authority {
            background-color: #ffc107;
            color: #333333;
            border-color: #ffc107;
        }
        .btn-authority:hover {
            background-color: #e0a800;
        }

        /* ê¶Œí•œ í‘œì‹œ ì…€ì„ ë§í¬ì²˜ëŸ¼ ë³´ì´ê²Œ */
        td.authority-link a {
            padding: 0;
            margin: 0;
            background: none;
            color: #007bff;
            text-decoration: underline;
            font-weight: bold;
        }
        td.authority-link a:hover {
            color: #0056b3;
        }


        /* ì‚­ì œ ë²„íŠ¼ */
        button[type="delete"] {
            background-color: #dc3545;
            color: white;
            border-color: #dc3545;
            padding: 6px 10px;
        }
        button[type="delete"]:hover {
            background-color: #c82333;
        }

        /* ê²€ìƒ‰ ì»¨í…Œì´ë„ˆ ìŠ¤íƒ€ì¼ */
        .search-container {
            width: 90%;
            margin: 0px auto 20px auto; /* í…Œì´ë¸” ìœ„ìª½ ì¤‘ì•™ ì •ë ¬ */
            max-width: 1200px;
            min-width: 800px;
            padding: 15px;
            background-color: #ffffff;
            border-radius: 8px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
        }

        .search-form {
            display: flex;
            justify-content: flex-end; /* ì˜¤ë¥¸ìª½ ì •ë ¬ */
            align-items: center;
        }

        .search-input {
            padding: 10px 15px;
            border: 1px solid #ced4da;
            border-radius: 4px 0 0 4px; /* ì™¼ìª½ë§Œ ë‘¥ê¸€ê²Œ */
            font-size: 1em;
            flex-grow: 1; /* ìµœëŒ€í•œ ê³µê°„ ì°¨ì§€ */
            max-width: 300px; /* ê²€ìƒ‰ì°½ ìµœëŒ€ ë„ˆë¹„ ì œí•œ */
        }

        .search-button {
            background-color: #007bff;
            color: white;
            padding: 10px 15px;
            border: 1px solid #007bff;
            border-radius: 0 4px 4px 0; /* ì˜¤ë¥¸ìª½ë§Œ ë‘¥ê¸€ê²Œ */
            font-size: 1em;
            cursor: pointer;
            margin-right: 0; /* ê¸°ì¡´ ë²„íŠ¼ ë§ˆì§„ ì œê±° */
        }

        .search-button:hover {
            background-color: #0056b3;
            border-color: #0056b3;
        }
    </style>
</head>
<body>
<div th:replace="layout/header :: headerFragment"></div>
<div class="search-container">
    <form th:action="@{/doctors/Dsearch}" method="get" class="search-form">
        <input type="text"
               name="mname"
               placeholder="ì´ë¦„ìœ¼ë¡œ ê²€ìƒ‰..."
               th:value="${param.mname}"
               class="search-input"/>
        <button type="submit" class="search-button">ê²€ìƒ‰</button>
    </form>
</div>
<table border="1" cellpadding="6">
    <tr>
        <th>ID</th>
        <th>ì•„ì´ë””</th>
        <th>ì´ë¦„</th>
        <th>ì „ê³µ</th>
        <th>ì „í™”</th>
        <th>ì´ë©”ì¼</th>
        <th th:if="${session.loginDoctor != null and session.loginDoctor.power == 3}"
            th:text="ê¶Œí•œ"></th>
        <th>ê´€ë¦¬</th>
    </tr>

    <tr th:each="staff : ${staffList}">
        <td th:text="${staff.medicalNum}"></td>
        <td th:text="${staff.medicalId}"></td>
        <td th:text="${staff.mname}"></td>
        <td th:text="${staff.specialty}"></td>
        <td th:text="${staff.mphone}"></td>
        <td th:text="${staff.email}"></td>
        <td th:if="${session.loginDoctor != null and session.loginDoctor.power == 3}"
            th:text="${staff.power}">
        </td>


        <td>
            <a th:if="${session.loginDoctor != null
          and (session.loginDoctor.medicalNum == staff.medicalNum
               or session.loginDoctor.power == 3)}"
               th:href="@{/doctors/{medicalNum}/edit(medicalNum=${staff.medicalNum})}"
               class="btn-edit">
                ìˆ˜ì •
            </a>

            <a th:if="${session.loginDoctor != null
            and session.loginDoctor.power == 3}"
               th:href="@{/doctors/{medicalNum}/authority(medicalNum=${staff.medicalNum})}"
               class="btn-authority">
                ê¶Œí•œ
            </a>

            <form th:if="${session.loginDoctor != null
               and session.loginDoctor.power == 3}"
                  th:action="@{/doctors/{medicalNum}/delete(medicalNum=${staff.medicalNum})}"
                  method="post"
                  style="display:inline;">
                <button type="delete">ì‚­ì œ</button>
            </form>
        </td>
    </tr>
</table>

<div th:replace="layout/footer :: footerFragment"></div>

</body>
</html>