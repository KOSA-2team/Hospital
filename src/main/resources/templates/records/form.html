<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>ì§„ë£Œ ì°¨íŠ¸ ì‘ì„±</title>
    <style>
        .container { max-width: 800px; margin: 30px auto; padding: 20px; border: 1px solid #ccc; }
        .row { display: flex; gap: 10px; margin-bottom: 10px; }
        label { display: block; font-weight: bold; margin-top: 15px; }
        input, textarea { width: 100%; padding: 8px; box-sizing: border-box; }
        .btn-submit { width: 100%; padding: 10px; margin-top: 20px; cursor: pointer; }
    </style>
</head>
<body>

<!--/patients/{id} ì—ì„œ í™˜ìì— ëŒ€í•œ ì§„ë£Œ ë‚ ì§œ í´ë¦­ ì‹œ /reservations/{id}/recordë¡œ ì—°ê²° í˜„ì¬ form.html í‘œì‹œ-->
<!--í•´ë‹¹ formì—ì„œëŠ” ì§„ë£Œ ê¸°ë¡ì— ëŒ€í•œ ë‚´ìš©ë§Œ ì²¨ë¶€ detailì—ì„œ ì²˜ë°©ì „ì— ê´€í•œ ë‚´ìš© í™•ì¸ ê°€ëŠ¥-->
<div th:replace="layout/header :: headerFragment"></div>

<main class="container">
    <h2>ğŸ©º ì§„ë£Œ ì°¨íŠ¸ ì‘ì„±</h2>

    <div style="border-bottom: 1px solid #ddd; padding-bottom: 15px; margin-bottom: 20px;">
        <h3>í™˜ì ì •ë³´</h3>
        <p><strong>í™˜ìëª…:</strong> <span th:text="${reservation.patientName}"></span></p>
        <p><strong>ë‹´ë‹¹ì˜:</strong> <span th:text="${reservation.doctorName}"></span></p>
    </div>

    <form action="/records/new" method="post" th:object="${recordFormDto}">
        <input type="hidden" th:field="*{reservationNum}">

        <label>ì§„ë‹¨ëª… (Diagnosis)</label>
        <input type="text" th:field="*{diagnosis}" required placeholder="ì§„ë‹¨ëª…ì„ ì…ë ¥í•˜ì„¸ìš”">

        <label>ì¹˜ë£Œ ë‚´ìš© (Treatment)</label>
        <textarea th:field="*{treatment}" rows="5" required placeholder="ìƒì„¸ ì¹˜ë£Œ ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”"></textarea>

        <hr>
        <h3>ğŸ’Š ì•½ ì²˜ë°© (Prescription)</h3>
        <div class="prescription-area">
            <div class="row">
                <strong style="flex: 2;">ì•½í’ˆëª…</strong>
                <strong style="flex: 2;">ë³µìš©ë²•</strong>
                <strong style="flex: 1;">ì¼ìˆ˜</strong>
            </div>

            <div class="row" th:each="i : ${#numbers.sequence(0, 2)}">
                <input type="text" th:field="*{prescriptions[__${i}__].medicationName}" style="flex: 2;" placeholder="ì•½í’ˆëª…">
                <input type="text" th:field="*{prescriptions[__${i}__].dosage}" style="flex: 2;" placeholder="ì˜ˆ: ì‹í›„ 30ë¶„">
                <input type="number" th:field="*{prescriptions[__${i}__].durationDays}" style="flex: 1;" value="3">
            </div>
        </div>

        <button type="submit" class="btn-submit">ì§„ë£Œ ê¸°ë¡ ì €ì¥</button>
    </form>
</main>

<div th:replace="layout/footer :: footerFragment"></div>

</body>
</html>