<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>ì§„ë£Œ ë‚´ì—­ ìˆ˜ì •</title>
    <style>
        .container { max-width: 800px; margin: 30px auto; padding: 20px; border: 1px solid #ccc; }
        .row { display: flex; gap: 10px; margin-bottom: 10px; }
        label { display: block; font-weight: bold; margin-top: 15px; }
        input, textarea { width: 100%; padding: 8px; box-sizing: border-box; }
        .btn-submit { width: 100%; padding: 10px; margin-top: 20px; cursor: pointer; }
    </style>
</head>
<body>

<div th:replace="layout/header :: headerFragment"></div>

<main class="container">
    <h2>âœï¸ ì§„ë£Œ ê¸°ë¡ ìˆ˜ì •</h2>

    <form th:action="@{/records/{id}/edit(id=${recordFormDto.treatmentNum})}" method="post" th:object="${recordFormDto}">
        <input type="hidden" th:field="*{treatmentNum}">
        <input type="hidden" th:field="*{reservationNum}">

        <label>ì§„ë‹¨ëª… (Diagnosis)</label>
        <input type="text" th:field="*{diagnosis}" required>

        <label>ì¹˜ë£Œ ë‚´ìš© (Treatment)</label>
        <textarea th:field="*{treatment}" rows="5" required></textarea>

        <hr>
        <h3>ğŸ’Š ì•½ ì²˜ë°© ìˆ˜ì •</h3>
        <p style="font-size: 0.9em;">* ìˆ˜ì • ì‹œ ê¸°ì¡´ ì²˜ë°©ì€ ì‚­ì œë˜ê³  í˜„ì¬ ì…ë ¥ê°’ìœ¼ë¡œ ì €ì¥ë©ë‹ˆë‹¤.</p>

        <div class="prescription-area">
            <div class="row">
                <strong style="flex: 2;">ì•½í’ˆëª…</strong>
                <strong style="flex: 2;">ë³µìš©ë²•</strong>
                <strong style="flex: 1;">ì¼ìˆ˜</strong>
            </div>

            <div class="row" th:each="i : ${#numbers.sequence(0, 2)}">
                <input type="text" th:field="*{prescriptions[__${i}__].medicationName}" style="flex: 2;" placeholder="ì•½í’ˆëª…">
                <input type="text" th:field="*{prescriptions[__${i}__].dosage}" style="flex: 2;" placeholder="ë³µìš©ë²•">
                <input type="number" th:field="*{prescriptions[__${i}__].durationDays}" style="flex: 1;" placeholder="ì¼ìˆ˜">
            </div>
        </div>

        <button type="submit" class="btn-submit">ìˆ˜ì • ì™„ë£Œ</button>
        <a href="javascript:history.back()" style="display:block; text-align:center; margin-top:10px; text-decoration:none; color:black;">ì·¨ì†Œ</a>
    </form>
</main>

<div th:replace="layout/footer :: footerFragment"></div>

</body>
</html>